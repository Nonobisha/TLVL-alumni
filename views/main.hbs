
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">TLVL</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav">
      <a class="nav-item nav-link active" href="index.html">Карта<span class="sr-only">(current)</span></a>
      <a class="nav-item nav-link" href="about.html">О сайте</a>
      <a class="nav-item nav-link" href="reg.html">Регистрация</a>
      <a class="nav-item nav-link" href="login.html">Вход</a>
    </div>
  </div>
</nav>


  <div class = "container-fluid mr-3">
   <div id="mapid" style = "height:560px;">
    </div>
</div>


<div class = "container-fluid mr-3 mt-3">
    <div class="row"> <div class ="col-12 text-center"> <h1><b> ВЫПУСКНИКИ <select class="form-control text-center"  id="mySelect">
    <option value="2018">2018</option>
    <option value="2017">2017</option>
    <option value="2016">2016</option>
    <option value="2015">2015</option>
    <option value="2014">2014</option>
    <option value="2013">2013</option>
    <option value="2012">2012</option>
    <option value="2011">2011</option>
    <option value="2010">2010</option>
    <option value="2009">2009</option>
    <option value="2008">2008</option>
    <option value="2007">2007</option>
    <option value="2006">2006</option>
    <option value="2005">2005</option>
    <option value="2004">2004</option>
    <option value="2003">2003</option>
    <option value="2002">2002</option>
    <option value="2001">2001</option>
    <option value="2000">2000</option>
    <option value="1999">1999</option>
    <option value="1998">1998</option>
    <option value="1997">1997</option>
    <option value="1996">1996</option>
    <option value="1995">1995</option>
    <option value="1994">1994</option>
    <option value="1993">1993</option>
    <option value="1992">1992</option>
    <option value="1991">1991</option>
    <option value="1990">1990</option>
    <option value="1989">1989</option>
    </select>
    <button type="button" class="btn btn-primary" onclick="myFunction()">Искать!</button>
 </b></div> </div>
    <div class = "row">
    <div class = "col-6 overflow-auto" style="height: 580px;">
 <ul class="list-group members" id = "alumni">
  <li class="list-group-item">Павел Смирнов</li>
  <li class="list-group-item">Александр Иванов</li>
  <li class="list-group-item">Анастасия Зайцева</li>
  <li class="list-group-item">Милена Давыдова</li>
  <li class="list-group-item active">Коля Зей</li>
  <li class="list-group-item">Дарья Гусева</li>
  <li class="list-group-item">Тимур Быков</li>
  <li class="list-group-item">Сергей Кириллов</li>
  <li class="list-group-item">Ситников Петр</li>
  <li class="list-group-item">Суворов Артем</li>
  <li class="list-group-item">Авдеев Бронислав </li>
  <li class="list-group-item">Галкин Ярослав</li>
  <li class="list-group-item">Брагин Николай</li>
  <li class="list-group-item">Кулаков Евгений</li>
  <li class="list-group-item">Комаров Пантелей</li>
  <li class="list-group-item">Якушев Артур</li>
  <li class="list-group-item">Мишин Юлий </li>
  <li class="list-group-item">Романов Мирон</li>
  <li class="list-group-item">Селиверстов Эрнест</li>
  <li class="list-group-item">Маслов Панкрат</li>
</ul> 
</div>
<div class = "col-6 border" id = "alum-view">
<div class = "container text-center align-center" id="alum-container">
   <h1>Коля Зей</h1>
   <hr/>
         <dl style="font-size:3vw;">
    <dt>Закончил школу в:</dt>
    <dd>- 1995 году</dd>
    <dt>Классный руководитель:</dt>
    <dd>- Цезарь</dd>
     <dt>Сейчас живёт в:</dt>
    <dd>- Риме</dd>
     <dt>Работает:</dt>
    <dd>-Достопримечательностью</dd>
  </dl>  
</div>
</div>
</div>
</div>

 
   <script type="text/javascript">
    var data = [{
      "id": 1,
      "graduate": 2002,
      "first_name": "Beverlie",
      "last_name": "Yeoman",
      "email": "byeoman0@google.it",
      "gender": "Female"
    }, {
      "id": 2,
       "graduate": 1985,
      "first_name": "Mabel",
      "last_name": "Saurin",
      "email": "msaurin1@facebook.com",
      "gender": "Female"
    }, {
      "id": 3,
       "graduate": 1999,
      "first_name": "Magnum",
      "last_name": "Moniker",
      "email": "mmoniker2@geocities.com",
      "gender": "Male"
    }]

    /* MAP */

    var mymap = L.map('mapid').setView([58.595, 25.014], 3);

    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    minZoom:2,
    id: 'mapbox.streets',
    accessToken: 'sk.eyJ1Ijoibm9ub2Jpc2hhIiwiYSI6ImNqd201enF3eDF1YnQ0NG8ydTd5cDhkajcifQ.bk0jp5sFLvNJPYTis0Xi_A'
}).addTo(mymap);
   
     updateAlumniList("Tallinn");

     var marker = L.marker([58.595, 25.014]).addTo(mymap);
     marker.city = "Tallinn";
     marker.bindPopup("<strong>Tallinn</strong><br />1312 Выпускника").openPopup();
     marker.addEventListener("popupopen", () => { updateAlumniList(marker.city);});

    var marker2 = L.marker([52.520, 13.405]).bindPopup("<b>5 Выпускника</b>").addTo(mymap);
    marker2.city = "Germany";
    //marker2.bindPopup("<b>5 Выпускника</b>");
    marker2.addEventListener("popupopen", () => { console.log(marker2.city);});

    var marker3 = L.marker([48.857, 2.352]).addTo(mymap);
    marker3.bindPopup("<b>12 Выпускника</b>");

    var marker4 = L.marker([40.731, -73.935]).addTo(mymap);
    marker4.bindPopup("<b>17 Выпускника</b>");

    function updateAlumniList(city) {
      console.log(city);
      $('#alumni').empty();
      let alumniList = data; // GET query to tlvl-alumni.site/api/alumni/city
      for (let alum of alumniList) {
        $('#alumni').append(`<li class="list-group-item" style = "cursor:pointer;"
        id="alum-${alum.id}">
        ${alum.first_name} ${alum.last_name}</li>`);
        $(`#alum-${alum.id}`).click(() => {
          updateAlumniView(alum.id);
          $('.list-group-item').removeClass('active');
          $(`#alum-${alum.id}`).addClass('active');
        });
      }
    }

    function updateAlumniView(alumId) {
      console.log(alumId);
      $('#alum-view').empty();
      let alumView = data;
      for(let alum of alumView) {
        if(alum.id == alumId) {
          $("#alum-view").append(`<div class = "container text-center align-center" id="alum-container">
           <h1>${alum.first_name} ${alum.last_name}</h1>
   <hr/>
         <dl style="font-size:3vw;">
    <dt>Закончил школу в:</dt>
    <dd>- ${alum.graduate}</dd>
    <dt>Классный руководитель:</dt>
    <dd>- Цезарь</dd>
     <dt>Сейчас живёт в:</dt>
    <dd>- Риме</dd>
     <dt>Работает:</dt>
    <dd>-Достопримечательностью</dd>
  </dl>  
</div>
</div>
</div>
</div>`);
      }
      }
    }
  </script>
 <footer class="page-footer font-small blue">

  <div class="footer-copyright text-center py-3"> <b>2019</b> Таллиннский Линнамяэский Русский Лицей:
    <a href="http://www.linnamae.tln.edu.ee/ "> http://www.linnamae.tln.edu.ee/ </a>
  </div>
</footer>

